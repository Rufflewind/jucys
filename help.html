<!doctype html><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta charset="utf-8"/><meta name="generator" content="pandoc"/><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes"/><title>-</title><style>code{white-space:pre-wrap}span.smallcaps{font-variant:small-caps}span.underline{text-decoration:underline}div.column{display:inline-block;vertical-align:top;width:50%}div.hanging-indent{margin-left:1.5em;text-indent:-1.5em}ul.task-list{list-style:none}</style><!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]--></head><body><h1><a href="https://rufflewind.com/jucys"><code>jucys</code></a></h1><p><code>jucys</code> is a tool for manipulating <a href="https://en.wikipedia.org/wiki/Angular_momentum_operator">angular momentum</a> diagrams, also known as <a href="https://en.wikipedia.org/wiki/Angular_momentum_diagrams_(quantum_mechanics)">Jucys (Yutsis) diagrams</a>. You can think of them as a graphical notation for summations over <a href="https://en.wikipedia.org/wiki/3-j_symbol">Wigner 3-jm symbols</a>, much like how Penrose diagrams describe summations over tensors or Feynmann diagrams describe integrals over fields.</p><table><td><a href="https://rufflewind.com/jucys#%7B%22diagram%22%3A%7B%22nodes%22%3A%5B%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%2210%22%2C%226%22%2C%221%22%5D%2C%22x%22%3A380%2C%22y%22%3A420%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%225%22%2C%226%22%2C%2212%22%5D%2C%22x%22%3A520%2C%22y%22%3A180%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%225%22%2C%229%22%2C%221%22%5D%2C%22x%22%3A660%2C%22y%22%3A420%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%229%22%2C%2212%22%2C%2210%22%5D%2C%22x%22%3A520%2C%22y%22%3A340%7D%5D%2C%22superlines%22%3A%7B%221%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%222%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%223%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%224%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%225%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%226%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%7D%2C%22lines%22%3A%7B%221%22%3A%7B%22superline%22%3A%226%22%2C%22direction%22%3A1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A1.5707963267948966%7D%2C%225%22%3A%7B%22superline%22%3A%224%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A1.5707963267948966%7D%2C%226%22%3A%7B%22superline%22%3A%225%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A4.71238898038469%7D%2C%229%22%3A%7B%22superline%22%3A%222%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A1.5707963267948966%7D%2C%2210%22%3A%7B%22superline%22%3A%221%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A4.71238898038469%7D%2C%2212%22%3A%7B%22superline%22%3A%223%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A4.71238898038469%7D%7D%2C%22deltas%22%3A%5B%5D%7D%2C%22frozen%22%3Afalse%2C%22showAmbient%22%3Atrue%7D"><img src="b7428a523204351ded4664a2cd4c32ea.png" alt="Diagram for a 6-j symbol" title="Diagram for a 6-j symbol"/></a></td><td><a href="https://rufflewind.com/jucys#%7B%22diagram%22%3A%7B%22nodes%22%3A%5B%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%2211%22%2C%2218%22%2C%225%22%5D%2C%22x%22%3A520%2C%22y%22%3A200%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%225%22%2C%2215%22%2C%2220%22%5D%2C%22x%22%3A660%2C%22y%22%3A280%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%2219%22%2C%2211%22%2C%2214%22%5D%2C%22x%22%3A520%2C%22y%22%3A520%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%2216%22%2C%2215%22%2C%2214%22%5D%2C%22x%22%3A380%2C%22y%22%3A440%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%2217%22%2C%2218%22%2C%2216%22%5D%2C%22x%22%3A380%2C%22y%22%3A280%7D%2C%7B%22type%22%3A%22w3j%22%2C%22lines%22%3A%5B%2219%22%2C%2217%22%2C%2220%22%5D%2C%22x%22%3A660%2C%22y%22%3A440%7D%5D%2C%22superlines%22%3A%7B%221%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%222%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%223%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%224%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%225%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%226%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%227%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%228%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%2C%229%22%3A%7B%22phase%22%3A0%2C%22summed%22%3Afalse%2C%22weight%22%3A0%7D%7D%2C%22lines%22%3A%7B%225%22%3A%7B%22superline%22%3A%221%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A-10%2C%22angle%22%3A1.5707963267948966%7D%2C%2211%22%3A%7B%22superline%22%3A%224%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.7000000000000001%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.7000000000000001%2C%22textOffset%22%3A-10%2C%22angle%22%3A1.5707963267948966%7D%2C%2214%22%3A%7B%22superline%22%3A%225%22%2C%22direction%22%3A1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A4.71238898038469%7D%2C%2215%22%3A%7B%22superline%22%3A%222%22%2C%22direction%22%3A1%2C%22arrowPos%22%3A0.30000000000000004%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.30000000000000004%2C%22textOffset%22%3A20%2C%22angle%22%3A2.6224465393432705%7D%2C%2216%22%3A%7B%22superline%22%3A%228%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A-1.5707963267948966%7D%2C%2217%22%3A%7B%22superline%22%3A%229%22%2C%22direction%22%3A1%2C%22arrowPos%22%3A0.30000000000000004%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.30000000000000004%2C%22textOffset%22%3A-20%2C%22angle%22%3A0.5191461142465229%7D%2C%2218%22%3A%7B%22superline%22%3A%227%22%2C%22direction%22%3A-1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A10%2C%22angle%22%3A0.7853981633974483%7D%2C%2219%22%3A%7B%22superline%22%3A%226%22%2C%22direction%22%3A1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A20%2C%22angle%22%3A4.71238898038469%7D%2C%2220%22%3A%7B%22superline%22%3A%223%22%2C%22direction%22%3A1%2C%22arrowPos%22%3A0.5%2C%22arcHeight%22%3A0%2C%22textPos%22%3A0.5%2C%22textOffset%22%3A0%2C%22angle%22%3A5.497787143782137%7D%7D%2C%22deltas%22%3A%5B%5D%7D%2C%22frozen%22%3Afalse%2C%22showAmbient%22%3Atrue%7D"><img src="61da9a90ecb27157b6c369608f462dd2.png" alt="Diagram for a 9-j symbol" title="Diagram for a 9-j symbol"/></a></td><tr><td colspan="2" align="center"><a href="https://rufflewind.com/img/jucys-diagram.mp4"><img src="https://rufflewind.com/img/jucys-diagram.gif"/></a></td></tr><tr></tr></table><p>The essential features of the tool have been implemented, but it’s not been thoroughly tested. The user interface is rather clunky and the source code quite messy and incoherent.</p><p>The implementation here isn’t completely faithful to Jucys’ original presentation. In particular, arrows are <em>not</em> interpreted as variances, but simply as phase factors. Fortunately, the net effect of this change is quite minor and translation to and from conventional Jucys diagrams is nearly trivial. See § Interpretation.</p><h2>Running the tool</h2><p>You can try it out here: <a href="https://rufflewind.com/jucys" class="uri">https://rufflewind.com/jucys</a></p><p>It’s a client-side web application written in JavaScript that runs entirely in your own browser. You don’t even need a server to run it!</p><p>The implementation makes extensive use of <a href="https://en.wikipedia.org/wiki/ECMAScript#7th_Edition_-_ECMAScript_2016">ES2016</a> and SVG, so you’ll need a pretty modern browser to run it. It has been tested on Chromium and Firefox. It may or may not work on Safari or Edge, and most likely won’t work on IE. There’s no support for mobile platforms, sorry. You’ll need a working mouse with a scroll-wheel button (middle button).</p><p>If you want to run it on your own computer or web server, you’ll have to build the source code by running <code>make</code>. You’ll need:</p><ul><li>Some flavor of <a href="https://en.wikipedia.org/wiki/Make_(software)">Make</a></li><li><a href="https://npmjs.com">npm</a></li><li><a href="https://bower.io">Bower</a></li><li><a href="https://pandoc.org">Pandoc</a></li><li><a href="http://purescript.org">PureScript</a></li><li><a href="https://github.com/purescript-contrib/pulp">Pulp</a></li></ul><p>as well as all the dependencies listed in <code>package.json</code> and <code>tools/bower.json</code>, which are installed using <code>npm</code> and <code>bower</code> respectively. The output is written to the <code>dist</code> directory.</p><h2>Usage</h2><h3>Input</h3><p>There are two ways to create a diagram: you can either draw it manually using the diagram editor, or specify them as text using the <em>diagram input tool</em> (<a href="https://rufflewind.com/jucys/tools" class="uri">https://rufflewind.com/jucys/tools</a>). The input tool is faster, but more limited in what it can do.</p><p>The syntax of the input tool is as follows:</p><ul><li>Every line of input corresponds to a collection of angular momenta that sums to <em>zero</em>. In other words, it means every line of input corresponds to either a spherical tensor matrix element coupled using the Wigner–Eckart theorem, or an overlap between two angular momentum states.</li><li>Clebsch–Gordan coupling is written using plus and minus signs just like in kindergarten.</li><li>Variables that are the same up to primes/apostrophes are implicitly summed over (only the <code><var>m</var></code>s, not <code><var>j</var></code>s).</li><li>Comments are prefixed by <code>#</code> like in Python or Bash.</li></ul><p>Note that diagrams created by the input tool always start off in the <em>reduction mode</em> of the editor, which means you can do algebraic manipulations that preserve equivalence, but if you want to break equivalence you have to exit that mode. See the documentation on the editor for more information.</p><h4>Example 1: Recoupling coefficient for (12)3 ↔︎ 1(23)</h4><p>For example, say you want to look at the textbook example of the recoupling coefficient:</p><pre><code>⟨ (a b) c | a (b c) ⟩</code></pre><p>This translates to the following input:</p><pre><code>rec ((a + b) + c) (a + (b + c))</code></pre><p>Type that in and click the “Show diagram” button. After a little bit of manipulation you’ll see it corresponds to a 6-j symbol (a.k.a. tetrahedral graph/K<sub>4</sub>/W<sub>4</sub>) up to phases and weights.</p><p>Note that the input editor does <em>not</em> specify which <code><var>j</var></code>s to sum over. It can’t, because it has no clue which is the source coupling and which is the destination coupling you want. In any case, it’s easy to tell what needs to be summed over, because those are always the <code><var>j</var></code>s that don’t show up on the other side of the equation!</p><p>The plus signs are important: they indicate that the angular momenta are covariant with respect to each other. If you want to couple a normal angular momentum with a <em>time-reversed</em> angular momentum, then you have to write <code>a - b</code> instead. “Negation” as far as the input tool is concerned just means the insertion of a metric tensor <code>(−1)<sup><var>j</var> − <var>m</var></sup> δ<sub><var>m</var>, −<var>m</var>′</sub></code>. Negating twice doesn’t give you the exact same angular momentum back; instead it accumulates a phase of <code>(−1)<sup>2 <var>j</var></sup></code>. The ordering is important too: <code>a + b</code> and <code>b + a</code> aren’t quite the same: they are different up to a phase factor.</p><p>What <code>rec</code> does is actually pretty dumb: it just connects the total angular momenta of both sides together, and then divides by <code>(2 <var>j</var><sub>total</sub> + 1)</code>. If you don’t want this compensating factor, use <code>rel</code> instead.</p><h4>Example 2: Scalar Pandya transform (12)(34) ↔︎ (14)(32)</h4><p>Unreduced spherical-scalar matrix elements can be written using <code>rel</code> or <code>rec</code>, depending the direction of the transformation.</p><p>For example, say you want to derive the transformation from unreduced ordinary two-body matrix elements to unreduced Pandya matrix elements:</p><pre><code>⟨ a b ¦ c d ⟩ → −⟨ a −d ¦ c −b ⟩</code></pre><p>(The minus sign in front of the matrix element is just a convention chosen by the Pandya matrix elements.) To input this, you write each matrix element on its own line, with the <em>source</em> using <code>rel</code> and <em>destination</em> using <code>rec</code>:</p><pre><code>rel (a + b) (c + d)
rec (a - d) (c - b)</code></pre><p>You’ll see right away that this is a 6-j symbol (a.k.a. tetrahedral graph/K<sub>4</sub>). This establishes the relation:</p><pre><code>(destination)   = ∑[…]   (diagram)   ×   (source)

−⟨ a −d ¦ c −b ⟩ = ∑[ab] (−1)^(2 ab) (2 ab + 1) {a b ab; c d ad} ⟨ a b ¦ c d ⟩</code></pre><h4>Example 3: Tensor Pandya transform (12)k(34) ↔︎ (14)k(32)</h4><p>Reduced matrix elements of spherical tensors is written using <code>wet</code>. Here, the Wigner–Eckart coupling convention of Wigner, Racah, and many others is used:</p><pre><code>⟨<var>j</var><sub>a</sub> <var>m</var><sub>a</sub>|<var>T</var><sup><var>k</var></sup><sub><var>q</var></sub>|<var>j</var><sub>b</sub> <var>m</var><sub>b</sub>⟩ = (−1)<sup><var>j</var><sub>a</sub> − <var>m</var><sub>a</sub></sup> (<var>j</var><sub>a</sub> −<var>m</var><sub>a</sub> <var>k</var> <var>q</var> <var>j</var><sub>b</sub> <var>m</var><sub>b</sub>) ⟨<var>j</var><sub>a</sub>‖<var>T</var><sup><var>k</var></sup><sub></sub>‖<var>j</var><sub>b</sub>⟩</code></pre><p>For example, say you want to derive the transformation between reduced ordinary two-body matrix elements and reduced Pandya matrix elements:</p><pre><code>⟨ a b ‖ k ‖ c d ⟩ ↔ −⟨ a −d ‖ k ‖ c −b ⟩</code></pre><p>(The minus sign in front of the matrix element is just a convention chosen by the Pandya matrix elements.) Here, <code>k</code> denotes the spherical tensor rank and the minus sign indicates time-reversal. To input this, you write each matrix element on its own line, coupled with <code>wet</code>:</p><pre><code>wet (a + b) k (c + d)
wet (a - d) k (c - b)</code></pre><p>The ordering of lines doesn’t matter, because recoupling coefficients are real and symmetric! You’ll see right away that this is a 9-j symbol (a.k.a. utility graph/Thomsen graph/K<sub>3,3</sub>).</p><p>If you want to look at just scalar coupling of reduced matrix elements, then you just need to replace <code>k</code> with <code>0</code> (either in the diagram input or diagram editor). After a bit of manipulation, you’ll get essentially a 6-j symbol up to Kronecker deltas, phases, and weights.</p><h4>Example 4: A tensor product</h4><p>Without motivating why we care about tensor products, suppose you want to calculate the Clebsch–Gordan coupled product:</p><pre><code>⟨ p | C | q ⟩ = ∑[i a b] ⟨ A B | C ⟩ ⟨ i p | A | a b ⟩ ⟨ a b | B | i q ⟩</code></pre><p>The corresponding input would be</p><pre><code>wet (i+p) A (a+b)
wet (a+b) B (i+q)
wet p (A+B) q</code></pre><p>After some simplifications, you should get two 6-j symbols, plus a triangular delta.</p><h3>Layout</h3><p>The interface of the tool is divided into four parts:</p><ul><li>There’s the header at the very top, which doesn’t really do much – most of the “buttons” aren’t even clickable.</li><li>The main frame in the middle shows the diagram, the raison d’être of this tool. This will be explained later.</li><li>The right sidebar shows the <i>tableau</i>, which tracks the boring details like phases, weights, and Kronecker deltas. This will also be explained later.</li><li>The footer at the bottom, if clicked, will render the equation. It doesn’t automatically update unless you click it because MathJax is slooow. Moreover, it quickly outgrows its usefulness because it doesn’t have the ability to recognize any of the 3<var>n</var>-j symbols, so you end with monstrous summations over 3-jm symbols instead.</li></ul><h3>Modes</h3><p>The tool distinguishes between two major modes:</p><ul><li><strong>Editing mode</strong>: In this mode, the tool makes no attempt to stop you from doing nasty things that violate equivalence. This is where you create/delete nodes, connect/rename lines, adjust the tableau, etc.</li><li><strong>Reduction (“frozen”) mode</strong>: Once you turn on reduction mode, the tool will only allow actions that preserve equivalence of the diagram. Some actions also behave differently in this mode.</li></ul><p>You can switch between the two modes using the <kbd>f</kbd> key.</p><h3>Undo/Redo</h3><p>This used to be a feature early on, but it was quickly removed because you can already Undo/Redo using the Back/Forward buttons of your browser. This should work even if, say, the app malfunctions due to a bug.</p><p>Every change to the diagram automatically updates the URL, so you can even “save” diagrams by bookmarking the URL. You can also send it to other people. (The URL can get really long though!)</p><h3>General controls</h3><ul><li>A general rule of thumb is that left-click usually does something fairly harmless (e.g. moving things around).</li><li>Right-click and middle-click are used to perform modifications on various parts of the diagram (especially reductions). Right and middle buttons are also used for dragging, with meaning that’s dependent on context.</li><li>Pressing Ctrl while moving an object snaps the object to a grid.</li></ul><p>The remaining key and mouse bindings are specified in the following sections on Editing mode and Reduction mode.</p><h3>Editing mode</h3><ul><li><kbd>w</kbd>: Create a Wigner 3-jm symbol at the location of your cursor.</li><li><kbd>c</kbd>: Create a Clebsch-Gordan coefficient at the location of your cursor.</li><li><kbd>a</kbd>: Attach/join two nearby terminals, forming a single line.</li><li><kbd>x</kbd>: Delete a node or a free line (can be indirectly used to detach lines).</li><li><kbd>v</kbd>: Toggle the visibility of ambient arrows (see § Orientable diagrams).</li><li><kbd>f</kbd>: Switch between editing mode and reduction (frozen) mode.</li><li><kbd>s</kbd>: Save the diagram as an SVG image.</li><li><kbd>r</kbd>: Reset and clear the entire diagram (if you encounter a bug in the app and <kbd>r</kbd> doesn’t work, you can still click on this button to reset).</li><li><kbd>Right-click</kbd> on a line to add/flip/remove the arrow. Unlike in reduction mode, this does not alter the phase at all.</li><li><kbd>Middle-click</kbd> on a line to change its <code><var>j</var></code> to a fresh value.</li></ul><p>The tableau is editable too: you can left/middle/right click on things, drag phases and weights around, etc. Some of these modifications are still available (albeit more restricted) while frozen.</p><h3>Reduction (“frozen”) mode</h3><p>Rules preserve the meaning of the diagram.</p><p>Other than the explicit rules listed here, you’re always allowed to move things around freely (except terminals). You can <kbd>Left-drag</kbd> nodes, lines, arrows, and labels.</p><h4>Minor rules</h4><ul><li><p><strong>Arrow flip</strong>: <kbd>Right-click</kbd> on a line to flip the arrow. This changes the phase by <code>(−1)<sup>2 <var>j</var></sup></code>. On <code><var>j</var> = 0</code> lines, this can also conjure arrows out of thin air.</p></li><li><p><strong>Triple arrow rule</strong>: <kbd>Right-click</kbd> on a 3-jm node to alter the surrounding arrows.</p></li><li><p><strong>Orientation flip:</strong> <kbd>Middle-click</kbd> on a 3-jm node to flip its orientation. This changes phase by <code>(−1)<sup><var>j</var><sub>1</sub> + <var>j</var><sub>2</sub> + <var>j</var><sub>3</sub></sup></code>.</p></li><li><p><strong>Triple phase rule</strong>: <kbd>Shift</kbd> + <kbd>Middle-click</kbd> on a node to change the phase by <code>(−1)<sup>2 <var>j</var><sub>1</sub> + 2 <var>j</var><sub>2</sub> + 2 <var>j</var><sub>3</sub></sup></code>.</p></li><li><p><strong>Variable exchange</strong>: <kbd>Middle-click</kbd> on a line cycles through the <code><var>j</var></code> variables that are known to be equal due to Kronecker deltas. If the line is a loop, this will instead create swap to a fresh, unused variable, which you can then rename to whatever you want.</p></li><li><p><strong>Variable renaming</strong>: You can rename bound variables as long as it doesn’t conflict with an existing variable.</p></li><li><p><strong>Summation elimination</strong>: <kbd>Right-click</kbd> on a summation sign in the tableau to eliminate this variable if it’s constrained by a Kronecker delta.</p></li><li><p><strong>Summation introduction</strong>: <kbd>Middle-click</kbd> on a summation sign in the tableau to introduce a summation over a new variable constrained by a Kronecker delta with the selected variable.</p></li><li><p><strong>Delta modification</strong>: You can add/remove Kronecker deltas as long as the parts that are lost/gained are still inferrable from the diagram itself.</p></li><li><p><strong>Delta transport</strong>: Phases and weights can be “transported” along a Kronecker delta by drag and drop.</p></li></ul><h4>Major rules</h4><ul><li><p><strong>(I) Identity introduction (pinching rule):</strong> <kbd>Right-drag</kbd> a line onto another line will introduce a resolution of the identity as two 3-jm nodes, with a summation over <code><var>j</var></code> in between.</p></li><li><p><strong>(I′) Identity elimination (prying rule):</strong> <kbd>Middle-drag</kbd> a summed line onto itself to eliminate a resolution of the identity, destroying two 3-jm nodes.</p></li><li><p><strong>(II) Loop elimination (pruning rule):</strong> <kbd>Right-drag</kbd> a loop line onto its neighboring node will the set the opposite line to zero, and try to erase the loop entirely along with the two adjacent 3-jm nodes.</p></li><li><p><strong>(II′) Loop introduction (growing rule):</strong> <kbd>Middle-drag</kbd> a line onto empty space will create two 3-jm nodes along with a loop (dual of pruning rule).</p></li><li><p><strong>(III) Zero elimination (cutting rule):</strong> <kbd>Right-drag</kbd> a line onto itself will split the diagram into two separate pieces, creating two 3-jm nodes in the process. This only works if at least one of the subdiagrams is orientable (see § Orientable diagrams).</p></li><li><p><strong>(III′) Zero introduction (gluing rule):</strong> <kbd>Middle-drag</kbd> a line onto another line will join the two lines together, creating two 3-jm nodes in the process.</p></li></ul><h2>Tableau</h2><p>The tableau consists of two parts:</p><ul><li>The upper table:<ul><li>Leftmost column: whether the <code><var>j</var></code> is being summed over.</li><li>2nd column: label of the <code><var>j</var></code></li><li>3rd column: phase; each dot stands for a single <code>(−1)<sup><var>j</var></sup></code> phase</li><li>Rightmost column: <code>√(2 <var>j</var> + 1)</code> weights (only the exponent is shown)</li></ul></li><li>The lower list shows the Kronecker deltas.</li></ul><h3>Orientable diagrams</h3><p>A diagram is <b>fully oriented</b> if every internal line has an arrow. A diagram is <b>orientable</b> if there exists an equivalent diagram that is fully oriented.</p><p>Some rules (e.g. pinching rule) can introduce cycles into the diagram if used carelessly. Diagrams without cycles are always orientable, but those with cycles can become non-orientable if the number of arrows and the number of lines in a cycle differ in <a href="https://en.wikipedia.org/wiki/Parity_(mathematics)">parity</a>. This is bad, because then you can’t use the cutting rule anymore. Hence, it is advisible to keep the diagram fully oriented at every stage of the manipulation.</p><p>You can also observe whether the diagram is orientable by enabling ambient arrows via <kbd>v</kbd>. Ambient arrows are translucent arrows that the editor automatically inserts using the three arrow rule. If the editor fails to find an orientable diagram, it will display the discrepancies in red: a red arrow means that the arrow shouldn’t be there, and a red circle means there should’ve been an arrow there. Take note that the editor only tries to find <em>one fully oriented diagram</em> – there’s almost always multiple possible fully oriented diagrams!</p><h2>Interpretation</h2><p>Currently, the tool supports two kinds of nodes. The <strong>3-jm nodes</strong> represent Wigner 3-jm symbols. The arguments are determined by the lines connected to it, read in the order dictated by the circular arrow.</p><pre><code>
          <var>j</var><sub>3</sub> <var>m</var><sub>3</sub>
            |
            |
            |
------------↺------------
<var>j</var><sub>1</sub> <var>m</var><sub>1</sub>                <var>j</var><sub>2</sub> <var>m</var><sub>2</sub>

= (<var>j</var><sub>1</sub> <var>j</var><sub>2</sub> <var>j</var><sub>3</sub>)
  (<var>m</var><sub>1</sub> <var>m</var><sub>2</sub> <var>m</var><sub>3</sub>)
</code></pre><p>(This differs superficially from conventional Jucys diagrams where the orientation is annotated using plus or minus signs.)</p><p><strong>Terminals</strong>, which are the dangling ends of lines. Every terminal is associated with an <em>external</em> <code>(<var>j</var>, <var>m</var>)</code> pair that isn’t being summed over.</p><p>Each <strong>line</strong> represents a <code>(<var>j</var>, <var>m</var>)</code> pair. For internal lines (not connected to any terminal), the <code><var>m</var></code> is summed over, whereas this is not true for external lines (connected to at least one terminal). On certain lines, the <code><var>j</var></code> is summed over as well – this is indicated by <code>∑</code> in the tableau.</p><p>The label of a line describes the label of the <code><var>j</var></code>, not the <code><var>m</var></code>. Every line represents a unique <code><var>m</var></code> variable, so it’s unnecessary to show the <code><var>m</var></code> variables.</p><p>An arrow represents a phase as well as a reversal in the sign of the <code><var>m</var></code> variable:</p><pre><code>
      <var>j</var>
<var>m</var> ---->---- <var>m</var>′

= (−1)<sup><var>j</var> − <var>m</var></sup> δ<sub><var>m</var>, −<var>m</var>′</sub></code></pre><p>This is the so-called <em>metric tensor</em> in angular momentum theory. This is the main difference from the conventional Jucys diagrams, which instead use arrows for variance (bra vs ket / time-forward vs time-reversed).</p><p>Translating from conventional Jucys diagrams to the formalism here is pretty straightforward. Simply erase all outgoing arrows on external lines.</p><p>To translate back, first use the standard rules to convert the diagram into a fully oriented form and adjust the arrows on external lines so that they always point inward (be sure to account for the change in phases if needed). Then, on the remaining lines that have no arrows at all, simply draw arrows pointing outward. Obviously, this means non-orientable diagrams cannot be written using conventional Jucys diagrams.</p><h2>Bugs</h2><p>Please <a href="https://github.com/Rufflewind/jucys/issues">file a bug report</a> if you run into any of the following:</p><ul><li>JavaScript error, causing the app to stop responding</li><li>An action violates equivalence in reduction mode</li></ul><p>Be sure to include the problematic diagram (include the URL!) as well as any logs from your browser’s developer console.</p><p>Keep in mind that even if something breaks, you can still hit the Back button of your browser to revert to a previous state.</p></body></html>